<!DOCTYPE html>
<html>
<head><title>Bare Bones</title></head>
<body>
  <button id="talkBtn" style="margin: 50px auto; display: block; font-size: 24px;" disabled />
  <script type="module">
    import { createVoiceClient, WebSpeechSTT, WebSpeechTTS } from 'voice-pipeline/client';
    import { TransformersLLM } from 'voice-pipeline';

    const client = createVoiceClient({
      stt: new WebSpeechSTT(),
      llm: new TransformersLLM({ model: 'HuggingFaceTB/SmolLM2-360M-Instruct', dtype: 'q4', maxNewTokens: 75, temperature: 0.7, device: 'webgpu' }),
      tts: new WebSpeechTTS(),
      systemPrompt: 'Short, one-word answers only',
    });

    const button = document.getElementById('talkBtn');
    client.on('status', status => { button.disabled = (status !== 'ready' && status !== 'speaking'); button.textContent = status; });
    button.onpointerdown = () => client.startRecording();
    button.onpointerup = () => client.stopRecording();
    client.connect();
  </script>
</body>
</html>